using System;
using System.Collections.Generic;
using System.Text;
using System.Linq;
using System.IO;

namespace Capstone.Classes
{
    /// <summary>
    /// Each instnace of this class represents the record of a sale
    /// </summary>
    public class SalesRecord
    {
        /// <summary>
        /// raw string pulled from the Log.txt file. Used to derive the other properties
        /// </summary>
        public string SaleInfo { get; set; }

        /// <summary>
        /// the name of each item sold
        /// </summary>
        public string Name
        {
            get
            {
                // The Name is derived by concatenating the 2nd element thru the fourth from last element of the SaleInfo Array
                string[] saleInfoArray = this.SaleInfo.Split(" ");
                string name = "";

                for (int i = 1; i < saleInfoArray.Length - 3; i++)
                {
                    name += $"{saleInfoArray[i]} ";
                }
                return name.Trim();
            }
        }

        /// <summary>
        /// the total number of sales for a given item
        /// </summary>
        public int amountSold
        {
            get
            {
                // amount sold is derived by returning the first returning the first element in the sale info array
                string[] saleInfoArray = this.SaleInfo.Split(" ");
                return Convert.ToInt32(saleInfoArray[0]);
            }
        }

        /// <summary>
        /// the total revenue generated by one item's sales
        /// </summary>
        public decimal perItemRevenue
        {
            get
            {
                // per item revenue is derived by returning the second element that starts with a dollar sign in SaleInfo 
                string[] saleInfoArray = this.SaleInfo.Split("$");
                
                return Convert.ToDecimal(saleInfoArray[1]);
            }
        }


    }
}

